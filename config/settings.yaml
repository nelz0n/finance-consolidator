# General Settings for Finance Consolidator

# Google Drive Configuration
google_drive:
  # Folder ID where input CSV/XLSX files are stored
  # To find: Open folder in Google Drive, look at URL
  # https://drive.google.com/drive/folders/YOUR_FOLDER_ID
  input_folder_id: "1CrtDt9JR9pNrE4I9HKxjnVxrb9Eh9E5b"
  
  # Credentials file location (relative to project root)
  credentials_path: "data/credentials/google_credentials.json"
  
  # Token storage (will be created after first auth)
  token_path: "data/credentials/token.pickle"

# Google Sheets Configuration
google_sheets:
  # Master spreadsheet ID
  # To find: Open sheet in Google Sheets, look at URL
  # https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit
  master_sheet_id: "10H6uDqvYs2iBpwBDxH-zEfSrSMAq6J5JbjKVR5NkG_w"
  
  # Tab names in the master sheet
  transactions_tab: "Transactions"
  balances_tab: "Balances"
  
  # Create tabs if they don't exist
  auto_create_tabs: true

# Currency Configuration
currency:
  # Base currency for normalization
  base_currency: "CZK"

  # Use CNB (Czech National Bank) API for real-time exchange rates
  use_cnb_api: true  # Set to false to use static rates below

  # Supported currencies
  supported:
    - "EUR"
    - "CZK"
    - "USD"
    - "GBP"

  # Static exchange rates (fallback if CNB API fails)
  # These are approximate and should be updated regularly if not using API
  rates:
    CZK: 1.0   # Base currency
    EUR: 24.5  # 1 EUR ≈ 24.5 CZK
    USD: 22.8  # 1 USD ≈ 22.8 CZK
    GBP: 28.5  # 1 GBP ≈ 28.5 CZK

  # CNB API Configuration
  cnb_api:
    cache_dir: "data/cache"  # Directory to cache CNB rates
    # CNB updates daily around 2:30 PM CET

# Categorization Configuration
categorization:
  # Rules source: "google_sheets" or "yaml"
  rules_source: "google_sheets"

  # Google Sheets configuration
  google_sheets:
    # Spreadsheet ID (defaults to master_sheet_id if not specified)
    spreadsheet_id: "10H6uDqvYs2iBpwBDxH-zEfSrSMAq6J5JbjKVR5NkG_w"

    # Tab names
    rules_tab: "Categorization_Rules"
    owner_mapping_tab: "Owner_Mapping"

  # Caching configuration
  cache_enabled: true
  cache_file: "data/cache/sheets_rules.yaml"
  cache_ttl_hours: 24  # Re-fetch from Sheets after 24 hours

# Processing Configuration
processing:
  # Batch size for writing to Sheets
  batch_size: 100
  
  # Date format for output
  output_date_format: "%Y-%m-%d"
  
  # Timezone
  timezone: "Europe/Prague"
  
  # Generate transaction IDs
  generate_ids: true
  id_format: "TXN_{date}_{seq}"  # e.g., TXN_20241015_001

# Logging Configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  
  # Log file location
  file: "data/logs/finance_consolidator.log"
  
  # Console output
  console: true
  
  # Detailed mode (more verbose)
  detailed: false

# Institution Configuration
institutions:
  # Path to institution configs
  config_dir: "config/institutions"
  
  # Auto-discover institution configs
  auto_discover: true
  
  # Enabled institutions (empty means all)
  enabled: []

# Data Quality
data_quality:
  # Validate required fields
  validate_required: true
  required_fields:
    - "date"
    - "amount"
    - "currency"
    - "institution"
  
  # Check for suspicious values
  suspicious_checks:
    enabled: true
    max_amount: 1000000  # CZK
    min_amount: -1000000  # CZK
  
  # Handle missing data
  missing_data:
    skip_row: false  # Set to true to skip rows with missing required fields
    default_values:
      category: "Uncategorized"
      owner: "Unknown"

# Features (future)
features:
  duplicate_detection: false
  auto_categorization: false
  email_notifications: false
  scheduled_runs: false
